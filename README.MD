# ğŸ§¾ Finances App (Django + React + PostgreSQL con Docker)

Este proyecto es una aplicaciÃ³n web que utiliza:

- âš™ï¸ **Backend:** Django + Django REST Framework
- ğŸ’» **Frontend:** React + Vite + TypeScript + Material UI (MUI)
- ğŸ›¢ï¸ **Base de datos:** PostgreSQL
- ğŸ³ **Contenedores:** Docker & Docker Compose

---

## ğŸ“ Estructura del Proyecto
```
  finances/
  â”œâ”€â”€ backend/ # Proyecto Django (API REST)
  â”‚ â”œâ”€â”€ finances/ # ConfiguraciÃ³n principal (settings.py, urls.py, wsgi.py)
  â”‚ â”œâ”€â”€ apps/ # Tus apps Django personalizadas
  â”‚ â”œâ”€â”€ requirements.txt # Dependencias del backend
  â”‚ â””â”€â”€ Dockerfile
  â”œâ”€â”€ frontend/ # Proyecto React + Vite
  â”‚ â”œâ”€â”€ src/
  â”‚ â”œâ”€â”€ public/
  â”‚ â””â”€â”€ Dockerfile
  â”œâ”€â”€ .env # Variables de entorno (Postgres, Django, etc)
  â”œâ”€â”€ docker-compose.yml
  â”œâ”€â”€ start.sh # Script para levantar todo y migrar
  â”œâ”€â”€ dev.sh # Script para desarrollo con runserver
  â””â”€â”€ .dockerignore
```

---

## âš™ï¸ Requisitos

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- Git Bash (Windows) o terminal bash

---

## ğŸš€ InstalaciÃ³n y ejecuciÃ³n (desde cero)

### 1. Clona el repositorio

bash
git clone https://tu-repo.com/finances.git
cd finances

### 2. Crea archivo .env
# .env
```
  POSTGRES_DB=finances_db
  POSTGRES_USER=admin
  POSTGRES_PASSWORD=admin123
  POSTGRES_HOST=db
  POSTGRES_PORT=5432
```
### 3. AsegÃºrate de que el backend tenga sus dependencias
Archivo: backend/requirements.txt
```
  Django>=4.2
  djangorestframework
  psycopg2-binary
  django-cors-headers
  gunicorn
```

### 4. Ejecuta el script principal
Esto construye todo, espera a la base de datos, aplica migraciones y crea el superusuario automÃ¡ticamente:
```
  chmod +x start.sh
  ./start.sh
```
  - Superusuario: admin
  - ContraseÃ±a: admin123

ğŸ’» Desarrollo (modo en caliente)
Si quieres usar runserver para recarga automÃ¡tica:
```
  chmod +x dev.sh
  ./dev.sh
```
ğŸ”— Accesos
  - ğŸ› ï¸ Django API / Admin: http://localhost:8000

  - ğŸ¨ Frontend React: http://localhost:3000

  - ğŸ“Š Base de datos (DBeaver, etc):
```
    Host: localhost

    Puerto: 5432

    Usuario: admin

    ContraseÃ±a: admin123

    Base de datos: finances_db
```
## ğŸ³ Crear Docker desde cero (si no existe)
Si tÃº aÃºn no tienes Dockerfiles o Compose, sigue esto:

### ğŸ“„ backend/Dockerfile
```
  FROM python:3.11-slim

  WORKDIR /app
  COPY requirements.txt .
  RUN pip install --no-cache-dir -r requirements.txt

  COPY . .

  CMD ["gunicorn", "finances.wsgi:application", "--bind", "0.0.0.0:8000"]
```
### ğŸ“„ frontend/Dockerfile
```
  FROM node:20

  WORKDIR /app
  COPY package*.json ./
  RUN npm install

  COPY . .
  RUN npm run build
  RUN npm install -g serve

  CMD ["serve", "-s", "dist"]
```
### ğŸ“„ docker-compose.yml (Carpeta RaÃ­z)
```
  services:
  db:
    image: postgres:15
    env_file: .env
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  backend:
    build:
      context: ./backend
    command: gunicorn finances.wsgi:application --bind 0.0.0.0:8000
    volumes:
      - ./backend:/app
    ports:
      - "8000:8000"
    depends_on:
      - db
    env_file: .env

  frontend:
    build:
      context: ./frontend
    volumes:
      - ./frontend:/app
    ports:
      - "3000:3000"
    stdin_open: true
    tty: true

  volumes:
    postgres_data:
```

### ğŸ“„ .dockerignore
```
  __pycache__/
  *.pyc
  *.pyo
  *.pyd
  env/
  venv/
  node_modules/
  dist/
  build/
  *.sqlite3
  *.log
  *.env
  .DS_Store
```
### ğŸ§ª Scripts Ãºtiles
```
  start.sh â†’ Levanta todo, espera PostgreSQL, corre migraciones y crea superusuario.
  dev.sh â†’ Ejecuta runserver para desarrollo en vivo (requiere backend vivo).
```
### ğŸ“¦ Construir todo manualmente (alternativa)
```
  docker-compose build
  docker-compose up -d
```
### ğŸ§¯ Problemas comunes
```
  ModuleNotFoundError: No module named 'corsheaders' â†’ Falta en requirements.txt + reconstrucciÃ³n con --build.

  container ... is not running â†’ Revisa errores con: docker-compose logs backend
```